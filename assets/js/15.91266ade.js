(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{172:function(s,t,e){"use strict";e.r(t);var a=e(0),r=Object(a.a)({},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"content"},[s._m(0),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),e("p",[s._v("单页 Web 应用（single page web application，SPA），就是只有一张 Web 页面的应用。单页应用程序 (SPA) 是加载单个 HTML 页面并在用户与应用程序交互时动态更新该页面的Web应用程序。浏览器一开始会加载必需的 HTML、CSS 和 JavaScript，所有的操作都在这张页面上完成，都由 JavaScript 来控制。因此，对单页应用来说模块化的开发和设计显得相当重要。")]),s._v(" "),e("p",[s._v("说明参考：")]),s._v(" "),e("ul",[e("li",[e("a",{ref:"noopener noreferrer",attrs:{href:"https://baike.baidu.com/item/SPA/17536313",target:"_blank",rel:"noopener noreferrer"}},[s._v("SPA · 百度百科"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{ref:"noopener noreferrer",attrs:{href:"https://zh.wikipedia.org/wiki/%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[s._v("单页应用 · 维基百科"),e("OutboundLink")],1)])]),s._v(" "),s._m(3),s._v(" "),e("p",[s._v("Plus 小屏网页客户端（以下简称 Plus SPA）是使用 Vue.js 及 ES+ 等现代 Web 技术进行构建编写的 Web 单页应用。其纯前端的代码，允许将 Plus SPA 分发到网络上的各个地方，甚至你可以进行设备嵌入本地运行，只要你有一个可以渲染 JS + HTML + CSS 的应用即可。")]),s._v(" "),s._m(4),s._v(" "),s._m(5),s._v(" "),s._m(6),e("p",[s._v("我们的 SPA 代码存放在👉「"),e("a",{ref:"noopener noreferrer",attrs:{href:"https://github.com/slimkit/plus-small-screen-client",target:"_blank",rel:"noopener noreferrer"}},[s._v("slimkit/plus-small-screen-client"),e("OutboundLink")],1),s._v("」。")]),s._v(" "),s._m(7),s._v(" "),s._m(8),s._m(9),s._v(" "),s._m(10),s._v(" "),e("p",[s._v("我们打开 "),e("a",{ref:"noopener noreferrer",attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Node.js 官网下载页面"),e("OutboundLink")],1),s._v(" 默认会选择 LTS 版本，目前我这里最新的是 "),e("code",[s._v("8.12.0")]),s._v(" 版本，我们在页面找到 ·Linux Binaries (x86/x64)· 这一行，我这里系统是 "),e("code",[s._v("65 Bit")]),s._v(" 所以我点击这一行的 "),e("code",[s._v("64-bit")]),s._v(" 按钮，你更具你系统选择。如果你不清楚，请看下图：")]),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/node-js-download-page.png")}}),s._v(" "),s._m(11),s._v(" "),s._m(12),s._m(13),s._v(" "),e("p",[s._v("现在我们下载解压工具对归档进行解压：")]),s._v(" "),s._m(14),s._m(15),s._v(" "),s._m(16),s._v(" "),s._m(17),s._m(18),s._v(" "),s._m(19),s._m(20),s._v(" "),s._m(21),s._m(22),s._v(" "),s._m(23),s._v(" "),s._m(24),s._m(25),s._v(" "),s._m(26),s._v(" "),s._m(27),s._v(" "),s._m(28),s._m(29),s._v(" "),s._m(30),e("blockquote",[e("p",[s._v("各个参数描述详情清查看 "),e("a",{ref:"noopener noreferrer",attrs:{href:"https://github.com/slimkit/plus/blob/master/resources/spa/.env.example",target:"_blank",rel:"noopener noreferrer"}},[s._v("plus/resource/spa/.env.example"),e("OutboundLink")],1),s._v(" 的描述")])]),s._v(" "),s._m(31),s._v(" "),s._m(32),s._v(" "),s._m(33),s._m(34),s._v(" "),s._m(35),s._v(" "),s._m(36),s._v(" "),s._m(37),s._v(" "),s._m(38),s._m(39),s._v(" "),s._m(40),e("p",[s._v("这个过程也是比较慢的，速度取决于你的磁盘速度。运行成功后会有类似下面的输出：")]),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/build-spa-console-output.png")}}),s._v(" "),e("p",[s._v("接下来我们执行下面的命令，将其编译好的输出软链到我们的 Plus 程序的 public 下：")]),s._v(" "),s._m(41),s._m(42),s._v(" "),s._m(43),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/local-dir-publish-spa-review.png")}}),s._v(" "),e("p",[s._v("注意点：")]),s._v(" "),s._m(44),s._v(" "),s._m(45),s._m(46),s._v(" "),s._m(47),s._v(" "),s._m(48),s._v(" "),s._m(49),s._m(50),s._v(" "),s._m(51),s._v(" "),s._m(52),s._v(" "),s._m(53),s._v(" "),e("p",[s._v("首先，你需要一个 GitHub 帐号，你可以任意创建一个空白仓库（打开网址 "),e("a",{ref:"noopener noreferrer",attrs:{href:"https://github.com/new",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/new"),e("OutboundLink")],1),s._v("），创建仓库如下截图：")]),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/new-a-github-repo.png")}}),s._v(" "),s._m(54),s._v(" "),s._m(55),s._v(" "),s._m(56),s._v(" "),s._m(57),s._v(" "),s._m(58),s._v(" "),e("p",[s._v("我们现在打开 Plus 程序的后台页面，然后点击「系统设置」在「基本信息」蓝中下拉，找到 「Web 终端」的设置版。首先我们在第二项的的地方输入 SPA 地址，输入后开关按钮变为可操作状态，然后点击开启，最后点击提交即可！截图如下：")]),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/spa-set-web-client-url.png")}})])},[function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("首先纠正一下你们所谓的 "),t("code",[this._v("H5")]),this._v("，H5 是 HTML 5 的缩写，也代表新浏览器技术和标准，例如一些先进浏览所支持的一些 HTML 5 标准 APIs，所以请大家认清事实别出去说 H5，在程序员眼里，听到这么叫真的觉得很 Low B 的！")])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("主要是不知道概念，很容易装逼失败，尴尬的是你😂")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"什么是-spa"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是-spa","aria-hidden":"true"}},[this._v("#")]),this._v(" 什么是 SPA")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介","aria-hidden":"true"}},[this._v("#")]),this._v(" 简介")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"下载程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载程序","aria-hidden":"true"}},[this._v("#")]),this._v(" 下载程序")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("在前面的教程中，我们在 "),t("strong",[this._v("CentOS")]),this._v(" "),t("code",[this._v("7.4")]),this._v(" 的服务器中已经安装可 Git 软件，如果你是直接跳过来看 SPA 安装教程的，请在 CentOS 中运行下面的命令安装，如果你不是 CentOS 系统，请自行从 Git 官网安装，命令如下：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("git")]),this._v("\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("现在，我们进入 CentOS 中，然后按照之前安装 Plus 的惯例，我们将程序代码存放在 "),t("code",[this._v("/usr/local/src")]),this._v(" 目录中，所以我们执行 "),t("code",[this._v("cd /usr/local/src")]),this._v(" 即可进入该目录，然后我们执行下面的命令：")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/slimkit/plus-small-screen-client spa "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" spa\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("执行完成你，你可以执行 "),t("code",[this._v("pwd")]),this._v(" 你可以看到你当前所处的位置为 "),t("code",[this._v("/usr/local/src/spa")]),this._v("，这就是我们的代码位置了。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"安装-node-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-node-js","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装 Node.js")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("通过上图可知，我这里需要 "),t("code",[this._v("64-bit")]),this._v(" 右键后选择「复制链接地址」得到 "),t("code",[this._v("https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz")]),this._v(" 这样的地址。我们现在回到服务器家目录（执行 "),t("code",[this._v("cd ~")]),this._v("）然后使用下面的命令进行下载：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("curl")]),this._v(" -L https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz "),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v(">")]),this._v(" node-v8.12.0-linux-x64.tar.xz\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("执行完成后，我们输入 "),t("code",[this._v("ls -al")]),this._v(" 命令，你会看到有一个 "),t("code",[this._v("node-v8.12.0-linux-x64.tar.xz")]),this._v(" 的归档文件。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v(" -y xz "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("tar")]),this._v("\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("p",[s._v("执行完成后，我们开始解压吧！我们先执行 "),e("code",[s._v("xz -d node-v8.12.0-linux-x64.tar.xz")]),s._v(" 命令，然后之前的 "),e("code",[s._v(".xz")]),s._v(" 归档消失了，会多处一个 "),e("code",[s._v("node-v8.12.0-linux-x64.tar")]),s._v(" 的归档文件，我们继续执行 "),e("code",[s._v("tar -xvf node-v8.12.0-linux-x64.tar")]),s._v(" 就会出现一个 "),e("code",[s._v("node-v8.12.0-linux-x64")]),s._v(" 的文件夹，这就是我们的 Node.js 程序了！")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("接下来，我们为了统一管理，我们将 Node 软件放到指定位置（并不是必须，而是推荐），之前我们的软件都放在 "),t("code",[this._v("/usr/local")]),this._v(" 下，所以这次也一样，我们执行：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("mv")]),this._v(" -f ~/node-v8.12.0-linux-x64 /usr/local/node\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("然后为了方便我们全局使用 "),t("code",[this._v("node")]),this._v(" 命令进行调用，我们需要将 "),t("code",[this._v("/usr/local/node/bin")]),this._v(" 加入到环境变量，素以我们使用 Vim 打开 "),t("code",[this._v("/etc/profile")]),this._v(" 文件，在结尾追加一行：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("export")]),this._v(" PATH"),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[this._v("$PATH")]),this._v(":/usr/local/node/bin/\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("加入后，我们执行 "),t("code",[this._v("source /etc/profile")]),this._v(" 使其生效，最后我们输入 "),t("code",[this._v("node -v")]),this._v(" 你会看到下面的信息，表示已经成功：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("v8.12.0\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"安装-yarn-依赖管理工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-yarn-依赖管理工具","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装 Yarn 依赖管理工具")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("我们并不推荐使用 NPM 进行依赖管理，因为开发人员在开发过程中也是重度依赖 Yarn 进行依赖管理，我们并不知道开发人员会搞出什么幺蛾子，所以我们和开发人员一样使用 Yarn 吧！常规安装 Yarn 较为麻烦，但是我们可以利用 NPM "),t("strong",[this._v("让媳妇把小三抱进家里")]),this._v("☺️：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("npm")]),this._v(" -g i yarn\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("接下来，我们运行 "),t("code",[this._v("yarn --version")]),this._v(" 就会输出 Yarn 的版本信息，说明我们已经安装完成了。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"配置-plus-spa"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-plus-spa","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置 Plus SPA")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("好了，工具和环境都安装完成了，我们输入 "),t("code",[this._v("cd /usr/local/src/spa")]),this._v(" 回到 Plus SPA 的代码目录，运行下面的命令，创建我们所需要的 "),t("code",[this._v(".env")]),this._v(" 文件：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cat")]),this._v(" .env.example "),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v(">")]),this._v(" .env\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("运行完成后，我们使用 Vim 工具进行编辑该文件，运行 "),t("code",[this._v("vim .env")]),this._v(" 命令，找到并编辑以下内容：")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-ini line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BASE_URL")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("/ # 我们假设你部署在一个域名下，所以默认 `/`, 例如你部署在子目录下，请设置子目录，必须以 `/` 结尾！")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_API_HOST")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v("http://127.0.0.1 # 将内容修改为我们服务器的 IP 地址（上一章我们使用 NPM + FPM 发布了站点的）")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"安装依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装依赖")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("我们使用 "),t("code",[this._v("cd /usr/local/src/spa")]),this._v(" 进入 Plus SPA 程序目录，这里我们使用 Yarn 工具进行程序的依赖安装：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("yarn "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v("\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("这个过程会从国外的服务器上下载依赖包的元数据和依赖包数据，所以速度会很慢，因为 "),t("code",[this._v("vue-cli")]),this._v(" 工具本身的依赖原因，过程中会出现一些 "),t("code",[this._v("warning")]),this._v(" 开头的警告，这不是错误，所以无需理会！")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"子目录发布-spa"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#子目录发布-spa","aria-hidden":"true"}},[this._v("#")]),this._v(" 子目录发布 SPA")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("子目录发布 H5 有一个不好的地方，就是我们只能使用 "),t("code",[this._v("hash")]),this._v(" 模式理由，但是我们可以规避"),t("strong",[this._v("跨域请求")]),this._v("的安全限制问题，当然，想使用 "),t("code",[this._v("history")]),this._v(" 需要对 Nginx 做特殊处理，这里教程中并不会给出例子，因为我们后面有独立部署的章节，所以我们先来看如何子目录安装吧。")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("p",[s._v("首先"),e("strong",[s._v("我们拟定我们希望放置在 Plus 程序域名下的 "),e("code",[s._v("spa")]),s._v(" 目录下")]),s._v("，所以，我们重新打开 Plus SPA 的 .env 文件，然后将下面的 "),e("code",[s._v("BASE_URL")]),s._v(" 修改为 "),e("code",[s._v("/spa/")]),s._v(" 这个值，修改后应该是这样的：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("BASE_URL=/spa/\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("修改成功后，我们使用 "),t("code",[this._v("cd /usr/local/src/spa")]),this._v(" 命令进入 Plus SPA 程序目录，然后执行虾米啊的命令进行打包编译：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("yarn build\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("ln -s /usr/local/src/spa/dist /usr/local/src/plus/public/spa\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("如果你不用软链，你可以将 "),t("code",[this._v("/usr/local/src/spa/dist")]),this._v(" 里面的内容全部复制到 "),t("code",[this._v("/usr/local/src/plus/public/spa")]),this._v(" 目录下。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("然后我们现在打开你的网站，后面输入 "),t("code",[this._v("/spa")]),this._v(" 查看 H5 吧！大概的样子如下：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",[t("li",[this._v("为防止在 History 模式下刷新页面出现 "),t("code",[this._v("404")]),this._v(" 错误，需要在 nginx.conf 的相应配置地方追加对于 SPA 的 URL 重写机制。其中 "),t("code",[this._v("/spa")]),this._v(" 是你的相对域名根目录的路径，工作目录以 "),t("code",[this._v("/usr/local/src/plus/public/spa")]),this._v(" 为例，相应配置类似于：")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-nginx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("spa "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alias")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plus"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("public"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("spa"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try_files")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$query_string")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_filename")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rewrite")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("spa"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("spa"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("s"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" last"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"独立域名发布-spa"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#独立域名发布-spa","aria-hidden":"true"}},[this._v("#")]),this._v(" 独立域名发布 SPA")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("我们在前面的教程中安装了 Nginx 这一节教程将指导如何在独立域名（或者端口）进行程序的发布，因为这里是教程，我们就换一个网络端口（因为 "),t("code",[this._v("80")]),this._v(" 端口已经被 Plus 程序占用）进行发布。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("我们使用 "),t("code",[this._v("touch /usr/local/nginx/vhost/spa.conf")]),this._v(" 命令创建配置文件，然后编辑该文件，内容如下：")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-nginx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因为 80 端口被占用了，所以我们使用 8080 端口")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v(" localhost"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果你已经为 SPA 分配了域名，那么将这路的 `localhost` 替换为域名，然后 listen 可以继续使用 80 端口！")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("spa"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try_files")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$is_args")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$args")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("p",[s._v("接下来，我们使用 "),e("code",[s._v("cd /usr/local/src/spa")]),s._v(" 进入 Plus SPA 目录，编辑下面的 "),e("code",[s._v(".env")]),s._v(" 文件，将 "),e("code",[s._v("BASE_URL")]),s._v(" 的值修改为 "),e("code",[s._v("/")]),s._v(" 修改后的样子："),e("code",[s._v("BASE_URL=/")]),s._v(" 这样子。将 "),e("code",[s._v("VUE_APP_ROUTER_MODE")]),s._v(" 的值替换为 "),e("code",[s._v("history")]),s._v(" 修改后的样子："),e("code",[s._v("VUE_APP_ROUTER_MODE=history")]),s._v("。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("然后我们执行 "),t("code",[this._v("yarn build")]),this._v(" 命令，等待命令执行完成。命令执行完成后，我们使用 "),t("code",[this._v("nginx -s reload")]),this._v(" 命令重新加载 Nginx 配置。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("然后我们在浏览器打开 "),t("code",[this._v("http://你的ip:8080")]),this._v(" 看到类似于「子目录发布的站点了」。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"github-pages-发布-spa"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#github-pages-发布-spa","aria-hidden":"true"}},[this._v("#")]),this._v(" GitHub pages 发布 SPA")])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("「Initialize this repository with a README」 一定要勾选上，因为看这个教程按照零基础进行，如果不勾选，会多处很多后续步骤，这个你们就自己学了 Git 命令自己探索吧！")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("p",[s._v("接下来，我们使用 "),e("code",[s._v("cd /usr/local/src/spa")]),s._v(" 进入 Plus SPA 目录，编辑下面的 "),e("code",[s._v(".env")]),s._v(" 文件，将 "),e("code",[s._v("BASE_URL")]),s._v(" 的值修改为 "),e("code",[s._v("仓库名字")]),s._v(" 修改后的样子："),e("code",[s._v("BASE_URL=/spa/")]),s._v(" (这里的值之所以是 "),e("code",[s._v("/spa/")]),s._v(" 是因为我们仓库名字叫做 "),e("code",[s._v("spa")]),s._v(") 这样子。将 "),e("code",[s._v("VUE_APP_ROUTER_MODE")]),s._v(" 的值替换为 "),e("code",[s._v("history")]),s._v(" 修改后的样子："),e("code",[s._v("VUE_APP_ROUTER_MODE=history")]),s._v("。")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("p",[s._v("然后我们执行 "),e("code",[s._v("yarn build")]),s._v(" 命令，执行完成后，我们得到了 "),e("code",[s._v("dist")]),s._v(" 的文件，然后将里面的内容上传到你创建仓库的 "),e("code",[s._v("gh-pages")]),s._v(" 分支中。访问 "),e("code",[s._v("https://<USERNAME>.github.io/<REPO>")]),s._v("。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[t("code",[this._v("<USERNAME>")]),this._v(" 是你的 GitHub 用户名，"),t("code",[this._v("<REPO>")]),this._v(" 是你的仓库名称。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"plus-程序开启页面跳转"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plus-程序开启页面跳转","aria-hidden":"true"}},[this._v("#")]),this._v(" Plus 程序开启页面跳转")])}],!1,null,null,null);r.options.__file="install-spa.md";t.default=r.exports}}]);