(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{174:function(s,t,e){"use strict";e.r(t);var n=e(0),a=Object(n.a)({},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"content"},[s._m(0),s._v(" "),s._m(1),s._v(" "),e("p",[s._v("我们打开"),e("a",{ref:"noopener noreferrer",attrs:{href:"http://www.php.net/downloads.php",target:"_blank",rel:"noopener noreferrer"}},[s._v("PHP 官网下载页"),e("OutboundLink")],1),s._v("找到最新的 PHP 7.2 版本，以 7.2.9 为例：")]),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/php-download-page.png")}}),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),s._m(4),s._m(5),s._v(" "),s._m(6),e("p",[s._v("等待命令执行完成即可，执行完成后，我们下载 PHP 源码：")]),s._v(" "),s._m(7),e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),s._m(8),s._v(" "),e("img",{attrs:{src:s.$withBase("/assets/img/guide/installation/php-download-copy-link.png")}}),s._v(" "),e("p",[s._v("复制得到地址后，我们运行下面的命令进行下载：")]),s._v(" "),s._m(9)]),s._v(" "),s._m(10),s._v(" "),e("p",[s._v("解压源码之前，请先下载解压工具：")]),s._v(" "),s._m(11),e("p",[s._v("然后我们先将 XZ 归档解压为 tar 归档：")]),s._v(" "),s._m(12),s._m(13),s._v(" "),s._m(14),s._m(15),s._v(" "),s._m(16),s._v(" "),s._m(17),s._v(" "),e("p",[s._v("编译 PHP 之前我们需要安装 PHP 编译工具和依赖：")]),s._v(" "),s._m(18),s._m(19),s._v(" "),s._m(20),e("p",[s._v("现在，我们使用 "),e("code",[s._v("cd php-7.2.9")]),s._v(" 进入源码目录，上面都是开始编译前的必要设置，但是我们还有一步没有完成，就是生成编译配置（如果你很想知道下面的参数有什么用，请访问"),e("a",{ref:"noopener noreferrer",attrs:{href:"https://www.cnblogs.com/zsl123/p/5962944.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),e("OutboundLink")],1),s._v("查看参数详解）：")]),s._v(" "),s._m(21),e("p",[s._v("等待完成，然后我们执行编译：")]),s._v(" "),s._m(22),s._m(23),s._v(" "),s._m(24),s._m(25),s._v(" "),s._m(26),s._m(27),s._v(" "),s._m(28),s._m(29),s._v(" "),s._m(30),s._m(31),s._v(" "),s._m(32),e("p",[s._v("会进入编辑模式，如果你不会用 Linux 下的 Vim 软件，请自信使用搜索引擎学习，编辑内容如下：")]),s._v(" "),e("p",[s._v("错误日志：")]),s._v(" "),s._m(33),e("p",[s._v("PID 文件配置")]),s._v(" "),s._m(34),s._m(35),s._v(" "),s._m(36),s._v(" "),s._m(37),e("p",[s._v("复制成功后，我们来设置开机启动 FPM：")]),s._v(" "),s._m(38),s._m(39),s._v(" "),s._m(40),e("p",[s._v("打开文件后我们在结尾写入：")]),s._v(" "),s._m(41),s._m(42),s._v(" "),s._m(43),s._m(44),s._v(" "),s._m(45),s._m(46),s._v(" "),s._m(47),s._v(" "),s._m(48),e("p",[s._v("如果你按照教程进行安装，到这里输出结果都会如上。自行安装的请百度 php 解锁禁用函数。")]),s._v(" "),e("p",[s._v("到这里，我们编译安装 PHP 就算完成")]),s._v(" "),s._m(49),s._v(" "),s._m(50)])},[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("p",[s._v("本章将会带领你在 "),e("strong",[s._v("CentOS")]),s._v(" "),e("code",[s._v("7.4")]),s._v(" 系统上编译安装 "),e("strong",[s._v("PHP")]),s._v(" "),e("code",[s._v("7.2")]),s._v(" 环境，以及缺少的拓展安装。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"下载源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载源码","aria-hidden":"true"}},[this._v("#")]),this._v(" 下载源码")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("我们点击"),t("strong",[this._v("绿色")]),this._v("框部分的的地址，最后我们通过选择地区后得到最终地址为："),t("code",[this._v("http://cn2.php.net/distributions/php-7.2.9.tar.xz")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("我们得到文件下载地址后，登入 Linux，我们现在在服务器下载 PHP 源码，下载我们使用 "),t("strong",[this._v("curl")]),this._v(" 命令下载，检查你的服务器是否有这个命令输入 "),t("code",[this._v("curl --help")]),this._v(" 如果有很大一串内容输出，则表示有该命令，如果输出内容为：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-log line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("-bash: curl: command not found\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("那么，我们使用 CentOS 自带的 "),t("code",[this._v("yum")]),this._v(" 命令进行安装：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("curl")]),this._v("\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("curl")]),this._v(" -o php-7.2.9.tar.xz http://cn2.php.net/distributions/php-7.2.9.tar.xz\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("p",[s._v("如果你无法找到准确的文件下载地址，那么你点击"),e("strong",[s._v("绿色")]),s._v("框的链接，会进入地区选择页面，例如你选择 "),e("code",[s._v("China")]),s._v(" 地区，你会看到一个 "),e("code",[s._v("cn2.php.net")]),s._v(" 的链接，鼠标放上去，「右键」点击「复制链接地址」你粘贴后会得到 "),e("code",[s._v("http://cn2.php.net/get/php-7.2.9.tar.xz/from/this/mirror")]),s._v(" 这样的地址，如图：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("curl")]),this._v(" -L -o php-7.2.9.tar.xz http://cn2.php.net/get/php-7.2.9.tar.xz/from/this/mirror\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"解压源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压源码","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压源码")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("tar")]),this._v(" xz\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("xz -d php-7.2.9.tar.xz\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("执行完成后，我们输入 "),t("code",[this._v("ls")]),this._v(" 命令，你会看到现在 "),t("code",[this._v("php-7.2.9.tar.xz")]),this._v(" 文件已经消失，而多出一个 "),t("code",[this._v("php-7.2.9.tar")]),this._v(" 归档。此时我们来解压这个 tar 归档：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("tar")]),this._v(" -xvf php-7.2.9.tar\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("解压完成后，运行 "),t("code",[this._v("ls")]),this._v(" 命令会看到，多出一个 "),t("code",[this._v("php-7.2.9")]),this._v(" 的目录了，好了我们现在就得到了源码。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("如果你解压步骤失败，可能是下载的文件不是 "),t("code",[this._v(".tar.xz")]),this._v(" 后缀归档，也有可能是下载过程中数据丢包，不用担心。你重新下运行 "),t("code",[this._v("rm -rf php-7.2.9*")]),this._v(" 命令，将你之前下载的删除，然后重新下载即可。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"编译-php"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译-php","aria-hidden":"true"}},[this._v("#")]),this._v(" 编译 PHP")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gcc autoconf gcc-c++ \\\nlibxml2 libxml2-devel \\\nopenssl openssl-devel \\\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("bzip2")]),s._v(" bzip2-devel \\\nlibcurl libcurl-devel \\\nlibjpeg libjpeg-devel \\\nlibpng libpng-devel \\\nfreetype freetype-devel \\\ngmp gmp-devel \\\nreadline readline-devel \\\nlibxslt libxslt-devel \\\nlibmcrypt libmcrypt-devel \\\nmhash mhash-devel \\\nsystemd-devel openjpeg-devel\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("安装完编译工具和依赖后，我们需要为 FPM 分配一个运行用户和用户组（我们取名 "),t("code",[this._v("php-fpm:php-fpm")]),this._v(" 并设置不予怒登录和不创建家目录）：")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" php-fpm "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -s /sbin/nologin -g php-fpm -M php-fpm\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./configure \\\n--prefix"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/php \\\n--with-config-file-path"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/php/etc \\\n--with-zlib-dir \\\n--with-freetype-dir \\\n--enable-mbstring \\\n--with-libxml-dir"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr \\\n--enable-xmlreader \\\n--enable-xmlwriter \\\n--enable-soap \\\n--enable-calendar \\\n--with-curl \\\n--with-zlib \\\n--with-gd \\\n--with-pear \\\n--with-pdo-sqlite \\\n--with-pdo-mysql \\\n--with-mysqli \\\n--with-mysql-sock \\\n--enable-mysqlnd \\\n--disable-rpath \\\n--enable-inline-optimization \\\n--with-bz2 \\\n--with-zlib \\\n--enable-sockets \\\n--enable-sysvsem \\\n--enable-sysvshm \\\n--enable-pcntl \\\n--enable-mbregex \\\n--enable-exif \\\n--enable-bcmath \\\n--with-mhash \\\n--enable-zip \\\n--with-pcre-regex \\\n--with-jpeg-dir"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr \\\n--with-png-dir"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr \\\n--with-openssl \\\n--enable-ftp \\\n--with-kerberos \\\n--with-gettext \\\n--with-xmlrpc \\\n--with-xsl \\\n--enable-fpm \\\n--with-fpm-user"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("php-fpm \\\n--with-fpm-group"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("php-fpm \\\n--with-fpm-systemd\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("make\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("这个过程会非常的缓慢，主要是看机器，你的服务器配置比较好就很快，一般而言差不多半小时到两小时都是正常的。执行完成后，我们推荐执行一次 "),t("code",[this._v("make test")]),this._v(" 命令，如果你觉得没必要浪费时间，请直接执行：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("make")]),this._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v("\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("执行完成后，你会看到 "),t("code",[this._v("php-7.2.9")]),this._v(" 目录下有 "),t("code",[this._v("php.ini-development")]),this._v(" 和 "),t("code",[this._v("php.ini-production")]),this._v(" 两个文件，因为我们是教程，所以选择开发环境的配置文件:")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cp")]),this._v(" php.ini-development /usr/local/php/etc/php.ini\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("复制完成后，我们进入 "),t("code",[this._v("/usr/local/php/etc")]),this._v(" 目录：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" /usr/local/php/etc\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("并执行 "),t("code",[this._v("ls")]),this._v(" 命令，你会看到有一个 "),t("code",[this._v("php-fpm.conf.default")]),this._v(" 文件，这个是 FPM 配置文件，目前是不会被加载的，我们执行：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cp")]),this._v(" php-fpm.conf.default php-fpm.conf\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("将其复制为可使用的配置文件，接着允许 "),t("code",[this._v("yum install -y vim")]),this._v(" 下载一个编辑器，下载完成后我们执行：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("vim php-fpm.conf\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("error_log = /usr/local/php/var/log/php-fpm.log\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("pid = /usr/local/php/var/run/php-fpm.pid\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("然后保存并退出，我们再只 "),t("code",[this._v("cd /usr/local/php/etc/php-fpm.d")]),this._v(" 进入 FPM 配置目录，这个目录下有一个 "),t("code",[this._v("www.conf.default")]),this._v(" 文件，我们执行 "),t("code",[this._v("cp www.conf.default www.conf")]),this._v(" 命令将其发布为可被加载的配置文件。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("接下来，我们需要对 FPM 做一些系统级的配置，我们进入之前解压的 PHP 源码目录，如果你跟随教程执行下来，应该在 "),t("code",[this._v("/root/php-7.2.9")]),this._v(" 目录，如果不是，自行进入你下载后解压的所在目录。进入该目录后，我们复制服务文件：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cp")]),this._v(" ./sapi/fpm/php-fpm.service /usr/lib/systemd/system/\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("systemctl "),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("enable")]),this._v(" php-fpm\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("当然，我们现在直接执行 "),t("code",[this._v("php -v")]),this._v(" 还无法找到 PHP 命令，所以，我们编辑将 "),t("code",[this._v("/usr/local/php/bin/")]),this._v(" 加入到环境变量：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("vim /etc/profile\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("export PATH=$PATH:/usr/local/php/bin/\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("写入后，并不会立刻生效，所以我们执行 "),t("code",[this._v("source /etc/profile")]),this._v(" 执行完成后，我们运行 "),t("code",[this._v("php -v")]),this._v(" 会输出 PHP 版本信息，差不多下面这样子：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("PHP 7.2.9 (cli) (built: Sep 18 2018 12:16:25) ( NTS )\nCopyright (c) 1997-2018 The PHP Group\nZend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br"),t("span",{staticClass:"line-number"},[this._v("2")]),t("br"),t("span",{staticClass:"line-number"},[this._v("3")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("现在，我们需要检查环境是否符合我们 Plus 程序的需要，所以请将下面的内容写入到测试脚本中，测试脚本我命名为 "),t("code",[this._v("plus-test.php")]),this._v(" 内容如下：")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language-php line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token php language-php"}},[e("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strict_types"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'exec function: '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("function_exists")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'exec'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'1'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'0'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP_EOL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'system function: '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("function_exists")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'system'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'1'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'0'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP_EOL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'scandir function: '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("function_exists")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'scandir'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'1'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'0'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP_EOL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'symlink function: '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("function_exists")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'symlink'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'1'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'0'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP_EOL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'shell_exec function: '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("function_exists")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'shell_exec'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'1'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'0'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP_EOL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'proc_open function: '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("function_exists")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'shell_exec'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'1'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'0'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP_EOL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'proc_get_status function: '")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("function_exists")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'proc_get_status'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'1'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[s._v("'0'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP_EOL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("注意，上面需要的函数都是 Console 也就是 CLI 环境下使用，这里配置细节之后会详细讲解。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("写入进去并保存退出后，我们执行 "),t("code",[this._v("php plus-test.php")]),this._v(" 输出内容正确的应该如下：")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("exec function: 1\nsystem function: 1\nscandir function: 1\nsymlink function: 1\nshell_exec function: 1\nproc_open function: 1\nproc_get_status function: 1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令","aria-hidden":"true"}},[this._v("#")]),this._v(" 命令")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ul",[e("li",[e("code",[s._v("systemctl enable php-fpm")]),s._v(" 开启 FPM 开机启动")]),s._v(" "),e("li",[e("code",[s._v("systemctl disable php-fpm")]),s._v(" 关闭 FPM 开机启动")]),s._v(" "),e("li",[e("code",[s._v("systemctl start php-fpm")]),s._v(" 启动 FPM")]),s._v(" "),e("li",[e("code",[s._v("systemctl stop php-fpm")]),s._v(" 关闭 FPM")]),s._v(" "),e("li",[e("code",[s._v("systemctl restart php-fpm")]),s._v(" 重启 FPM")]),s._v(" "),e("li",[e("code",[s._v("systemctl status php-fpm")]),s._v(" 查看 FPM 运行状态")]),s._v(" "),e("li",[e("code",[s._v("systemctl kill php-fpm")]),s._v(" 杀死 FPM")])])}],!1,null,null,null);a.options.__file="build-install-php.md";t.default=a.exports}}]);